<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css"
    />
    <script
      type="module"
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
    ></script>
    <link rel="stylesheet" href="../assets/CSS/delivery.css" />
    <title>Complete your purchase</title>
  </head>
  <body>
    <!-- nav -->
    <div class="navbar">
      <img
        class="image-1"
        src="../assets/images/new logo.png"
        width="100"
        height="100"
        alt="image"
      />
      <button class="navbar-btn">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <nav class="navbar-item hide">
        <ul>
          <li><a href="../index.html">Home</a></li>
          <li><a href="../Pages/analysis.html">Hair Analysis</a></li>
          <li><a href="../Pages/Product.html">Products</a></li>
          <li class="box"><span class="bi bi-cart4 count"></span>Cart</li>
          <li>
            <a href="../Pages/acc.html" class="bi bi-person-circle">
              Account
            </a>
          </li>
        </ul>
      </nav>
    </div>

    <div class="progress-checkout-container">
      <div class="progress-step-container">
        <div class="step-check"></div>
        <a href="../Pages/delivery.html"
          ><span class="step-title">Address</span></a
        >
      </div>
      <div class="progress-step-container">
        <div class="step-check"></div>
        <a href="../Pages/check.html"
          ><span class="step-title">Payment</span></a
        >
      </div>
      <div class="progress-step-container">
        <div class="step-check"></div>
        <a href="../Pages/confirmation.html">
          <span class="step-title">Review</span></a
        >
      </div>
    </div>

    <div class="form-container">
      <h2 class="form-title">Address Details</h2>
      <form action="" class="checkout-form" id="form">
        <div class="input-line">
          <label for="name">Name </label>
          <input
            type="text"
            name="name"
            id="name"
            placeholder="Your name and surname"
            autocomplete="off"
            pattern="[A-Za-z]{1,30}"
            title="Username cannot contains spaces"
            placeholder="Username"
            required="true"
          />
        </div>
        <div class="input-line">
          <label for="name">Phone number</label>
          <input
            type="text"
            name="name"
            id="number"
            title="Phone number contain 10 digits only"
            placeholder="+91"
            pattern="[6-9]{1}[0-9]{9}"
            required="true"
          />
        </div>
        <div class="input-container">
          <div class="input-line">
            <label for="name">Your state</label>
            <select class="select" id="select" required="true">
              <option>CHOOSE</option>
              <option>Tamil Nadu</option>
              <option>Kerala</option>
            </select>
          </div>

          <!-- <div class="input-line">
            <label for="name">Your state</label>
            <input id=" state" />
          </div> -->
          <div class="input-line">
            <label for="name">Pincode</label>
            <input
              type="text"
              name="name"
              id="pincode"
              placeholder="***"
              required="true"
              pattern="[0-6]{6}"
            />
          </div>
        </div>
        <div class="input-line">
          <label for="name">Address</label>
          <input
            type="text"
            name="name"
            id="address"
            placeholder="Enter your address"
            required="true"
          />
        </div>
        <input type="submit" value="Ready to Payment" />
      </form>
    </div>
    <script src="../assets/js/order.js"></script>
    <script>
      let state = document.getElementById("state");

      async function getToken() {
        const response = await fetch(
          `https://www.universal-tutorial.com/api/getaccesstoken`,
          {
            method: "GET",
            headers: {
              "api-token":
                "qYNmq_Y46Nx2xpB6EX8-jzjKmhE05gn0cUq26AuhegJ3NixpCZ_g3RpA2eL14jq6QNs",
              Accept: "application/json",
              "user-email": "healthyhair040@gmail.com",
            },
          }
        );
        return response.json();
      }
      async function getData(endpoint) {
        const authToken = await getToken();
        const response = await fetch(
          `https://www.universal-tutorial.com/api/${endpoint}`,
          {
            method: "GET",
            headers: {
              Authorization: `Bearer ${authToken.auth_token}`,
              Accept: "application/json",
            },
          }
        );
        return await response.json();
      }

      async function showData() {
        const dataArr = await getData("state");
        // const stateList = await getData(`states/${dataArr[0]["country_name"]}`);
        // const districtList = await getData(
        //   `cities/${stateList[0]["state_name"]}`
        // );
        let option;
        // countryOutput.innerText = dataArr[0]["country_name"];
        stateOutput.innerText = stateList[0]["state_name"];
        // cityOutput.innerText = districtList[0]["city_name"];
        // for (const element of dataArr) {
        //   option = document.createElement("option");

        //   option.value = element["country_name"];
        //   option.text = element["country_name"];
        //   countryArr.appendChild(option);
        // }
        for (const element of stateList) {
          option = document.createElement("option");
          option.value = element["state_name"];
          option.text = element["state_name"];
          stateArr.appendChild(option);
        }
        // for (const element of districtList) {
        //   option = document.createElement("option");
        //   option.value = element["city_name"];
        //   option.text = element["city_name"];
        //   districtArr.appendChild(option);
        // }
      }
      showData();
      // countryArr.addEventListener("change", async () => {
      //   const dataArr = await getData(`states/${countryArr.value}`);
      //   // stateArr.innerHTML = "";
      //   // districtArr.innerHTML = "";
      //   // countryOutput.innerText = countryArr.value;
      //   // stateOutput.innerText = stateArr.value;
      //   // cityOutput.innerText = districtArr.value;
      //   for (const element of dataArr) {
      //     var option = document.createElement("option");
      //     option.value = element["state_name"];
      //     option.text = element["state_name"];
      //     stateArr.appendChild(option);
      //   }
      // });
      //  state.addEventListener("change", async () => {
      //     const dataArr = await getData(`cities/${stateArr.value}`);
      //     districtArr.innerHTML = "";
      //     countryOutput.innerText = countryArr.value;
      //     stateOutput.innerText =state.value;
      //     cityOutput.innerText = districtArr.value;
      //     for (const element of dataArr) {
      //       var option = document.createElement("option");
      //       option.value = element["city_name"];
      //       option.text = element["city_name"];
      //       districtArr.appendChild(option);
      //     }
      //   });
      districtArr.addEventListener("change", async () => {
        cityOutput.innerText = districtArr.value;
      });
    </script>
  </body>
</html>
